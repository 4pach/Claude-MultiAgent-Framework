# Claude Code Development Kit - Workflow –¥–ª—è Telegram Sticker Bot

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ Claude Code –≤ –ø—Ä–æ–µ–∫—Ç–µ:
```bash
cd /home/dmin/projects/telegram_sticker_bot/telegram_sticker_bot
claude
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞
./dev-scripts.sh status

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
./dev-scripts.sh start

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./dev-scripts.sh logs

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./dev-scripts.sh test
```

## üìã –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude Code Development Kit

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.clauderc`:
- –ü—É—Ç–∏ –∫ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI —Å–µ—Ä–≤–∏—Å–æ–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–°–∫—Ä–∏–ø—Ç `dev-scripts.sh` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è Claude Code
```
telegram_sticker_bot/
‚îú‚îÄ‚îÄ .clauderc              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Claude Code
‚îú‚îÄ‚îÄ CLAUDE.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ claude-dev-workflow.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ dev-scripts.sh         # –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ bot/                   # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ menu/              # –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–µ–Ω—é
‚îÇ   ‚îî‚îÄ‚îÄ states/            # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ services/              # AI —Å–µ—Ä–≤–∏—Å—ã –∏ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ image_generation_service.py
‚îÇ   ‚îú‚îÄ‚îÄ image_processing_service.py
‚îÇ   ‚îî‚îÄ‚îÄ sticker_service.py
‚îú‚îÄ‚îÄ db/                    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ config/                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ storage/               # –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

## üîß –ö–æ–º–∞–Ω–¥—ã Claude Code –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

### –†–∞–±–æ—Ç–∞ —Å –±–æ—Ç–æ–º:
```bash
# –í Claude Code CLI:
/run ./dev-scripts.sh start        # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
/run ./dev-scripts.sh test         # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
/run ./dev-scripts.sh status       # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–æ—Ç–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ bot/

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
–î–æ–±–∞–≤—å –Ω–æ–≤—ã–π —Ö–µ–Ω–¥–ª–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ –≤ bot/handlers/

# –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI —Å–µ—Ä–≤–∏—Å–æ–≤
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Replicate API
```

## üéØ Workflow –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –¢–∏–ø–∏—á–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
1. **–ó–∞–ø—É—Å–∫ Claude Code**: `claude` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
2. **–ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏**: –û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
3. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: Claude Code –ø–æ–º–æ–∂–µ—Ç —Å –∫–æ–¥–æ–º
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: `./dev-scripts.sh test`
5. **–ó–∞–ø—É—Å–∫**: `./dev-scripts.sh start`
6. **–û—Ç–ª–∞–¥–∫–∞**: `./dev-scripts.sh logs`

### –ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏:
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: Claude Code
cd /home/dmin/projects/telegram_sticker_bot/telegram_sticker_bot
claude

# –í Claude Code:
–•–æ—á—É –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —ç–º–æ—Ü–∏—é "—É–¥–∏–≤–ª–µ–Ω–∏–µ" –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./dev-scripts.sh test
./dev-scripts.sh start
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏: `logs/bot.log`
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏: `./dev-scripts.sh logs`
- –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `logs/logging_config.py`

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
./dev-scripts.sh status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
./dev-scripts.sh init-db

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
./dev-scripts.sh deps
```

## ü§ñ AI –°–µ—Ä–≤–∏—Å—ã

### Replicate Integration:
- –ú–æ–¥–µ–ª—å: `fofr/face-to-many`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `services/replicate_client.py`
- API —Ç–æ–∫–µ–Ω: `REPLICATE_API_TOKEN` –≤ .env

### Leonardo AI:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `services/leonardo_client.py`
- API –∫–ª—é—á: `LEONARDO_API_KEY` –≤ .env

### Local Diffusers:
- –ú–æ–¥–µ–ª—å: `SG161222/Realistic_Vision_V6.0_B1_noVAE`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `services/image_generation_service.py`
- –¢—Ä–µ–±—É–µ—Ç: PyTorch, Diffusers

## üé® –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### ImageProcessingService:
- –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞: rembg (–ª–æ–∫–∞–ª—å–Ω–æ), Remove.bg API, ClipDrop API
- –†–µ—Å–∞–π–∑ –¥–æ 512x512 –ø–∏–∫—Å–µ–ª–µ–π –¥–ª—è —Å—Ç–∏–∫–µ—Ä–æ–≤
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (<500KB)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### StickerService:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ImageProcessingService
- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∏–∫–µ—Ä–ø–∞–∫–æ–≤ Telegram
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤
- –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è Claude Code

### –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞:
```
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –±–æ—Ç–∞
–ù–∞–π–¥–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ
–ü—Ä–µ–¥–ª–æ–∂–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π:
```
–î–æ–±–∞–≤—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤
–†–µ–∞–ª–∏–∑—É–π —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–ø–∏—Å–æ–∫
–°–æ–∑–¥–∞–π –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º
```

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:
```
–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –∫–æ–¥ –≤ services/image_generation_service.py
–£–ª—É—á—à–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ handlers/
–î–æ–±–∞–≤—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
```

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö AI —Å–µ—Ä–≤–∏—Å–æ–≤:
1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç –≤ `services/`
2. –î–æ–±–∞–≤–∏—Ç—å –≤ `ImageGenerationService`
3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config/config.py`
4. –î–æ–±–∞–≤–∏—Ç—å –≤ `.clauderc`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö API —É–¥–∞–ª–µ–Ω–∏—è —Ñ–æ–Ω–∞:
1. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é API –≤ `ImageProcessingService.__init__()`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ `_remove_background_api()`
3. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `CLAUDE.md`

### –ù–æ–≤—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞:
1. –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª–∏ –≤ `db/models.py`
2. –î–æ–±–∞–≤–∏—Ç—å —Ö–µ–Ω–¥–ª–µ—Ä—ã –≤ `bot/handlers/`
3. –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ `bot/keyboards.py`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env` —Ñ–∞–π–ª
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–π –≤ `config/config.py`
- –ù–æ–≤—ã–µ API –∫–ª—é—á–∏ –¥–ª—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏:
  - `REMOVEBG_API_KEY` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `CLIPDROP_API_KEY` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- Graceful degradation –¥–ª—è AI —Å–µ—Ä–≤–∏—Å–æ–≤

---

**–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å Claude Code Development Kit**
*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-07-11 - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π*